<Project Sdk="Microsoft.NET.Sdk.Razor">
  <PropertyGroup Label="Package">
    <Nullable>enable</Nullable>
    <PackageReleaseNotes></PackageReleaseNotes>
    <PackageTags>AspNetCore;IdentityServer;AspNetIdentityUI</PackageTags>
    <VersionPrefix>$(VersionPrefixIdentityUI)</VersionPrefix>
  </PropertyGroup>
  <PropertyGroup>
    <EnableDefaultRazorGenerateItems>false</EnableDefaultRazorGenerateItems>
    <AddRazorSupportForMvc>true</AddRazorSupportForMvc>
    <StaticWebAssetBasePath>Identity</StaticWebAssetBasePath>
    <ProvideApplicationPartFactoryAttributeTypeName>Microsoft.AspNetCore.Mvc.ApplicationParts.NullApplicationPartFactory, Microsoft.AspNetCore.Mvc.Core</ProvideApplicationPartFactoryAttributeTypeName>
    <DisableStaticWebAssetsBuildPropsFileGeneration>true</DisableStaticWebAssetsBuildPropsFileGeneration>
    <StaticWebAssetsDisableProjectBuildPropsFileGeneration>true</StaticWebAssetsDisableProjectBuildPropsFileGeneration>
    <StaticWebAssetsDisableProjectBuildMultiTargetingPropsFileGeneration>true</StaticWebAssetsDisableProjectBuildMultiTargetingPropsFileGeneration>
    <StaticWebAssetsDisableProjectBuildTransitivePropsFileGeneration>true</StaticWebAssetsDisableProjectBuildTransitivePropsFileGeneration>
    <!--<StaticWebAssetsGetBuildAssetsTargets>GetIdentityUIAssets</StaticWebAssetsGetBuildAssetsTargets>-->
  </PropertyGroup>
  <ItemGroup>
    <!--<Content Remove="@(Content)" />-->
    <None Include="build\*" Pack="true" PackagePath="build\" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Indice.Features.Identity.Core" Version="$(VersionPrefixIdentity)" />
    <PackageReference Include="Indice.Features.Identity.UI.Assets" Version="$(VersionPrefixIdentityUI)" />
    <PackageReference Include="Microsoft.ApplicationInsights.AspNetCore" Version="2.21.0" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\Indice.Features.Identity.Core\Indice.Features.Identity.Core.csproj" />
    <ProjectReference Include="..\Indice.Features.Identity.UI.Assets\Indice.Features.Identity.UI.Assets.csproj" />
  </ItemGroup>
  <!-- Build all the razor views into classes -->
  <Target Name="SetupRazorInputs" BeforeTargets="ResolveRazorGenerateInputs">
    <ItemGroup>
      <_RazorGenerate Include="Pages\**\*.cshtml" />

      <RazorGenerate Include="@(_RazorGenerate)" Link="Pages\%(RecursiveDir)%(Filename)%(Extension)" />
    </ItemGroup>
  </Target>
</Project>
