<lib-view-layout title="{{'campaigns-create.title' | translate}}"
                 [meta-items]="metaItems">
    <div class="min-h-full mb-8">
        <main>
            <div class="mx-auto px-4 sm:px-6 md:flex md:items-center md:justify-between md:space-x-5 lg:px-8">
                <div class="flex items-center space-x-5"></div>
                <div class="mt-6 flex flex-col-reverse justify-stretch space-y-4 space-y-reverse sm:flex-row-reverse sm:justify-end sm:space-x-reverse sm:space-y-0 sm:space-x-3 md:mt-0 md:flex-row md:space-x-3">
                    <button type="button"
                            (click)="createCampaignStepper.goToPreviousStep()"
                            *ngIf="createCampaignStepper.canGoBack"
                            class="side-view-layout-action-button-cancel">
                        {{'campaigns-create.previous' | translate}}
                    </button>
                    <button type="button"
                            (click)="createCampaignStepper.goToNextStep()"
                            *ngIf="createCampaignStepper.canGoForward || createCampaignStepper.currentStep?.isLast"
                            class="side-view-layout-action-button-submit">
                        {{ createCampaignStepper.currentStep?.isLast ? '{{"campaigns-create.save" | translate}}' : '{{"campaigns-create.next" | translate}}' }}
                    </button>
                </div>
            </div>
            <div class="mt-8 mx-auto grid grid-cols-1 sm:px-6 lg:grid-flow-col-dense lg:grid-cols-1">
                <div class="space-y-6 lg:col-start-1 lg:col-span-2">
                    <section aria-labelledby="create-campaign-wizard">
                        <div class="bg-white shadow sm:rounded-lg pt-4">
                            <lib-stepper [linear]="true"
                                         [type]="StepperType.PanelsWithBorder"
                                         (stepChanged)="onStepperStepChanged($event)"
                                         (completed)="onSubmitCampaign()"
                                         #createCampaignStepper>
                                <lib-step [stepControl]="basicInfoStep.form">
                                    <ng-template libStepLabel>{{'campaigns-steps.basic-info-title' | translate}}</ng-template>
                                    <ng-template libStepInfo>{{'campaigns-steps.basic-info-description' | translate}}</ng-template>
                                    <app-campaign-basic-info (templateSelected)="templateId = $event"
                                                             #basicInfoStep>
                                    </app-campaign-basic-info>
                                </lib-step>
                                <lib-step [stepControl]="contentStep.form">
                                    <ng-template libStepLabel>{{'campaigns-steps.content-title' | translate}}</ng-template>
                                    <ng-template libStepInfo>{{'campaigns-steps.content-description' | translate}}</ng-template>
                                    <app-campaign-content [additionalData]="basicInfoData"
                                                          [content]="content"
                                                          #contentStep>
                                    </app-campaign-content>
                                </lib-step>
                                <lib-step [stepControl]="contentStep.form">
                                    <ng-template libStepLabel>{{'campaigns-steps.attachments-title' | translate}}</ng-template>
                                    <ng-template libStepInfo>{{'campaigns-steps.attachments-description' | translate}}</ng-template>
                                    <app-campaign-attachments #attachmentsStep></app-campaign-attachments>
                                </lib-step>
                                <lib-step [stepControl]="recipientsStep.form">
                                    <ng-template libStepLabel>{{'campaigns-steps.recipients-title' | translate}}</ng-template>
                                    <ng-template libStepInfo>{{'campaigns-steps.recipients-description' | translate}}</ng-template>
                                    <app-campaign-recipients #recipientsStep></app-campaign-recipients>
                                </lib-step>
                                <lib-step [stepControl]="previewStep.form">
                                    <ng-template libStepLabel>{{'campaigns-steps.preview-title' | translate}}</ng-template>
                                    <ng-template libStepInfo>{{'campaigns-steps.preview-description' | translate}}</ng-template>
                                    <app-campaign-preview [data]="previewData"
                                                          #previewStep>
                                    </app-campaign-preview>
                                </lib-step>
                            </lib-stepper>
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>
</lib-view-layout>